(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8767],{72842:function(C){C.exports={linkGroup:"linkGroup___3u5k3"}},20620:function(C){C.exports={radar:"radar___1_avc",legend:"legend___cMjxg",legendItem:"legendItem___13xG8",dot:"dot___10Iis"}},54178:function(C){C.exports={activitiesList:"activitiesList___1iz4w",username:"username___2CaQo",event:"event___37Bra",pageHeaderContent:"pageHeaderContent___1v9Rj",avatar:"avatar___2REGU",content:"content___2JXYM",contentTitle:"contentTitle___2ZQYk",extraContent:"extraContent___171XZ",statItem:"statItem___WnzK8",members:"members___pCbZL",member:"member___1PrAP",projectList:"projectList___1-phY",cardTitle:"cardTitle___i2mGR",projectGrid:"projectGrid___2_ET-",projectItemContent:"projectItemContent___1Af7z",datetime:"datetime___3wNS1",activeCard:"activeCard___2L47N"}},72545:function(C,B,a){"use strict";a.r(B),a.d(B,{default:function(){return de}});var Ee=a(5317),F=a(87555),Ce=a(52222),A=a(65507),ye=a(12399),g=a(82404),Ze=a(66518),G=a(95322),I=a(60360),j=a(66646),x=a(65353),U=a(18604),Ae=a(17581),$=a(39404),Ne=a(90930),N=a(23040),Le=a(6244),X=a(17345),e=a(67294),Z=a(87748),O=a(23715),Y=a(28258),Q=a(56051),H=a.n(Q),E=a(63012),J=a(13378);function S(u){var c=u.style;c.height="100%";var l=parseInt("".concat(getComputedStyle(u).height),10),t=parseInt("".concat(getComputedStyle(u).paddingTop),10)+parseInt("".concat(getComputedStyle(u).paddingBottom),10);return l-t}function k(u){if(!u)return 0;var c=u,l=S(c),t=c.parentNode;return t&&(l=S(t)),l}function K(){return function(u){var c=function(l){(0,x.Z)(s,l);var t=(0,U.Z)(s);function s(){var o;(0,I.Z)(this,s);for(var n=arguments.length,r=new Array(n),v=0;v<n;v++)r[v]=arguments[v];return o=t.call.apply(t,[this].concat(r)),o.state={computedHeight:0},o.root=void 0,o.handleRoot=function(m){o.root=m},o}return(0,j.Z)(s,[{key:"componentDidMount",value:function(){var n=this.props.height;if(!n){var r=k(this.root);this.setState({computedHeight:r}),r<1&&(r=k(this.root),this.setState({computedHeight:r}))}}},{key:"render",value:function(){var n=this.props.height,r=this.state.computedHeight,v=n||r;return e.createElement("div",{ref:this.handleRoot},v>0&&e.createElement(u,(0,J.Z)({},this.props,{height:v})))}}]),s}(e.Component);return c}}var V=K,w=a(20620),L=a.n(w),q=function(u){(0,x.Z)(l,u);var c=(0,U.Z)(l);function l(){var t;(0,I.Z)(this,l);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return t=c.call.apply(c,[this].concat(o)),t.state={legendData:[]},t.chart=void 0,t.node=void 0,t.getG2Instance=function(r){t.chart=r},t.getLegendData=function(){if(!!t.chart){var r=t.chart.getAllGeoms()[0];if(!!r){var v=r.get("dataArray")||[],m=v.map(function(p){var h=p.map(function(f){return f._origin}),i={name:h[0].name,color:p[0].color,checked:!0,value:h.reduce(function(f,D){return f+D.value},0)};return i});t.setState({legendData:m})}}},t.handleRef=function(r){t.node=r},t.handleLegendClick=function(r,v){var m=r;m.checked=!m.checked;var p=t.state.legendData;p[v]=m;var h=p.filter(function(i){return i.checked}).map(function(i){return i.name});t.chart&&(t.chart.filter("name",function(i){return h.indexOf("".concat(i))>-1}),t.chart.repaint()),t.setState({legendData:p})},t}return(0,j.Z)(l,[{key:"componentDidMount",value:function(){this.getLegendData()}},{key:"componentDidUpdate",value:function(s){var o=this.props.data;o!==s.data&&this.getLegendData()}},{key:"render",value:function(){var s=this,o=["#1890FF","#FACC14","#2FC25B","#8543E0","#F04864","#13C2C2","#fa8c16","#a0d911"],n=this.props,r=n.data,v=r===void 0?[]:r,m=n.height,p=m===void 0?0:m,h=n.title,i=n.hasLegend,f=i===void 0?!1:i,D=n.forceFit,ue=D===void 0?!0:D,z=n.tickCount,me=z===void 0?5:z,P=n.padding,ve=P===void 0?[35,30,16,30]:P,M=n.animate,pe=M===void 0?!0:M,T=n.colors,b=T===void 0?o:T,W=this.state.legendData,he={value:{min:0,tickCount:me}},ge=p-(f?80:22);return e.createElement("div",{className:L().radar,style:{height:p}},h&&e.createElement("h4",null,h),e.createElement(E.Chart,{scale:he,height:ge,forceFit:ue,data:v,padding:ve,animate:pe,onGetG2Instance:this.getG2Instance},e.createElement(E.Tooltip,null),e.createElement(E.Coord,{type:"polar"}),e.createElement(E.Axis,{name:"label",line:void 0,tickLine:void 0,grid:{lineStyle:{lineDash:void 0},hideFirstLine:!1}}),e.createElement(E.Axis,{name:"value",grid:{type:"polygon",lineStyle:{lineDash:void 0}}}),e.createElement(E.Geom,{type:"line",position:"label*value",color:["name",b],size:1}),e.createElement(E.Geom,{type:"point",position:"label*value",color:["name",b],shape:"circle",size:3})),f&&e.createElement(F.Z,{className:L().legend},W.map(function(y,fe){return e.createElement(A.Z,{span:24/W.length,key:y.name,onClick:function(){return s.handleLegendClick(y,fe)}},e.createElement("div",{className:L().legendItem},e.createElement("p",null,e.createElement("span",{className:L().dot,style:{backgroundColor:y.checked?y.color:"#aaa"}}),e.createElement("span",null,y.name)),e.createElement("h6",null,y.value)))})))}}]),l}(e.Component),_=V()(q),De=a(13753),ee=a(48429),te=a(49101),ae=a(72842),ne=a.n(ae),R=function(c){var l=c.links,t=c.linkElement,s=c.onAdd;return e.createElement("div",{className:ne().linkGroup},l.map(function(o){return(0,e.createElement)(t,{key:"linkGroup-item-".concat(o.id||o.title),to:o.href,href:o.href},o.title)}),e.createElement(ee.Z,{size:"small",type:"primary",ghost:!0,onClick:s},e.createElement(te.Z,null)," \u6DFB\u52A0"))};R.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var re=R,oe=a(54178),d=a.n(oe),le=[{title:"\u64CD\u4F5C\u4E00",href:""},{title:"\u64CD\u4F5C\u4E8C",href:""},{title:"\u64CD\u4F5C\u4E09",href:""},{title:"\u64CD\u4F5C\u56DB",href:""},{title:"\u64CD\u4F5C\u4E94",href:""},{title:"\u64CD\u4F5C\u516D",href:""}],ie=function(c){var l=c.currentUser,t=l&&Object.keys(l).length;return t?e.createElement("div",{className:d().pageHeaderContent},e.createElement("div",{className:d().avatar},e.createElement(N.C,{size:"large",src:l.avatar})),e.createElement("div",{className:d().content},e.createElement("div",{className:d().contentTitle},"\u65E9\u5B89\uFF0C",l.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"),e.createElement("div",null,l.title," |",l.group))):e.createElement(X.Z,{avatar:!0,paragraph:{rows:1},active:!0})},se=function(){return e.createElement("div",{className:d().extraContent},e.createElement("div",{className:d().statItem},e.createElement($.Z,{title:"\u9879\u76EE\u6570",value:56})),e.createElement("div",{className:d().statItem},e.createElement($.Z,{title:"\u56E2\u961F\u5185\u6392\u540D",value:8,suffix:"/ 24"})),e.createElement("div",{className:d().statItem},e.createElement($.Z,{title:"\u9879\u76EE\u8BBF\u95EE",value:2223})))},ce=function(u){(0,x.Z)(l,u);var c=(0,U.Z)(l);function l(){var t;(0,I.Z)(this,l);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return t=c.call.apply(c,[this].concat(o)),t.renderActivities=function(r){var v=r.template.split(/@\{([^{}]*)\}/gi).map(function(m){return r[m]?e.createElement("a",{href:r[m].link,key:r[m].name},r[m].name):m});return e.createElement(G.ZP.Item,{key:r.id},e.createElement(G.ZP.Item.Meta,{avatar:e.createElement(N.C,{src:r.user.avatar}),title:e.createElement("span",null,e.createElement("a",{className:d().username},r.user.name),"\xA0",e.createElement("span",{className:d().event},v)),description:e.createElement("span",{className:d().datetime,title:r.updatedAt},H()(r.updatedAt).fromNow())}))},t}return(0,j.Z)(l,[{key:"componentDidMount",value:function(){var s=this.props.dispatch;s({type:"dashboardAndworkplace/init"})}},{key:"componentWillUnmount",value:function(){var s=this.props.dispatch;s({type:"dashboardAndworkplace/clear"})}},{key:"render",value:function(){var s=this,o=this.props,n=o.currentUser,r=o.activities,v=o.projectNotice,m=o.projectLoading,p=o.activitiesLoading,h=o.radarData;return!n||!n.userid?null:e.createElement(Y.Z,{content:e.createElement(ie,{currentUser:n}),extraContent:e.createElement(se,null)},e.createElement(F.Z,{gutter:24},e.createElement(A.Z,{xl:16,lg:24,md:24,sm:24,xs:24},e.createElement(g.Z,{className:d().projectList,style:{marginBottom:24},title:"\u8FDB\u884C\u4E2D\u7684\u9879\u76EE",bordered:!1,extra:e.createElement(Z.rU,{to:"/"},"\u5168\u90E8\u9879\u76EE"),loading:m,bodyStyle:{padding:0}},v.map(function(i){return e.createElement(g.Z.Grid,{className:d().projectGrid,key:i.id},e.createElement(g.Z,{bodyStyle:{padding:0},bordered:!1},e.createElement(g.Z.Meta,{title:e.createElement("div",{className:d().cardTitle},e.createElement(N.C,{size:"small",src:i.logo}),e.createElement(Z.rU,{to:i.href},i.title)),description:i.description}),e.createElement("div",{className:d().projectItemContent},e.createElement(Z.rU,{to:i.memberLink},i.member||""),i.updatedAt&&e.createElement("span",{className:d().datetime,title:i.updatedAt},H()(i.updatedAt).fromNow()))))})),e.createElement(g.Z,{bodyStyle:{padding:0},bordered:!1,className:d().activeCard,title:"\u52A8\u6001",loading:p},e.createElement(G.ZP,{loading:p,renderItem:function(f){return s.renderActivities(f)},dataSource:r,className:d().activitiesList,size:"large"}))),e.createElement(A.Z,{xl:8,lg:24,md:24,sm:24,xs:24},e.createElement(g.Z,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0}},e.createElement(re,{onAdd:function(){},links:le,linkElement:Z.rU})),e.createElement(g.Z,{style:{marginBottom:24},bordered:!1,title:"XX \u6307\u6570",loading:h.length===0},e.createElement("div",{className:d().chart},e.createElement(_,{hasLegend:!0,height:343,data:h}))),e.createElement(g.Z,{bodyStyle:{paddingTop:12,paddingBottom:12},bordered:!1,title:"\u56E2\u961F",loading:m},e.createElement("div",{className:d().members},e.createElement(F.Z,{gutter:48},v.map(function(i){return e.createElement(A.Z,{span:12,key:"members-item-".concat(i.id)},e.createElement(Z.rU,{to:i.href},e.createElement(N.C,{src:i.logo,size:"small"}),e.createElement("span",{className:d().member},i.member)))})))))))}}]),l}(e.Component),de=(0,O.$j)(function(u){var c=u.dashboardAndworkplace,l=c.currentUser,t=c.projectNotice,s=c.activities,o=c.radarData,n=u.loading;return{currentUser:l,projectNotice:t,activities:s,radarData:o,currentUserLoading:n.effects["dashboardAndworkplace/fetchUserCurrent"],projectLoading:n.effects["dashboardAndworkplace/fetchProjectNotice"],activitiesLoading:n.effects["dashboardAndworkplace/fetchActivitiesList"]}})(ce)}}]);
